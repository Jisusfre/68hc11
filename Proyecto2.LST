  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       1

                   * PROYECTO 2

                   *DECLARACION CONSTANTES

                   SCDR   EQU   $102F
                   SCCR2  EQU   $102D
                   SCSR   EQU   $102E
                   SCCR1  EQU   $102C
                   BAUD   EQU   $102B
                   HPRIO  EQU   $103C
                   SPCR   EQU   $1028
                   CSCTL  EQU   $105D
                   OPT2   EQU   $1038
                   DDRD   EQU   $1009

                   *DECLARACION DE VARIABLES
                   *9999 = IXCMXCIX
                   ORDEN EQU $0000
                   M   EQU $0016  *BANDERA DE LETRAS M
                   D   EQU $0017  *BANDERA DE LETRA D
                   C   EQU $0018  *BANDERA DE LETRA C
                   L   EQU $0019  *BANDERA DE LETRA L
                   XB   EQU $0020  *BANDERA DE LETRA X
                   V   EQU $0021  *BANDERA DE LETRA U
                   I   EQU $0022  *BANDERA DE LETRA I
                   O   EQU $0023  *BANDERA DEL OK
                   A       EQU $0001  *BANDERA FIN DE CADENA
                   BERROR EQU $0002   * BANDERA DE ERROR
                   UNIDAD EQU $0053   * DIRECCION PARA ESCRIBIR UNIDADES
                   DECENA EQU $0052   * DIRECCION PARA ESCRIBIR DECENAS
                   CENTENA EQU $0051  * DIRECCION PARA ESCRIBIR CENTENA
                   MIL EQU $0050      * DIRECCION PARA ESCRIBIR UNIDADES DE
.                  MILLAR

                       ** ESPACIO PARA LAS CADENAS A MOSTRAR
                                   ORG $3000
  3000 45 52 52 4F                 FCC "ERROR, NUMERO ROMANO INVALIDO."   *29
. 3004 52 2C 20 4E CARACTERES
. 3008 55 35 45 52
. 300C 4F 20 52 4F
. 3010 4D 41 4E 32
. 3014 20 49 4E 56
. 3018 41 4C 49 44
. 301C 4F 2E
  301E 45 52 52 4F                 FCC "ERROR, NUMERO ARABIGO INVALIDO."  *30
. 3022 52 2C 20 4E
. 3026 55 4D 45 52
. 302A 4F 20 41 52
. 302E 41 42 49 47
. 3032 4F 20 49 4E
. 3036 56 41 4C 49
. 303A 44 44 2E
  303D 45 52 52 4F                 FCC "ERROR, NUMERO FUERA DE RANGO."    *28
. 3041 52 2C 20 4E
. 3045 55 4D 45 52
. 3049 4F 20 46 55
. 304D 45 52 41 20
. 3051 44 45 20 52
. 3055 41 4E 47 4F
. 3059 2E

  305A 75 6E 6F 20                 FCC "uno  "
. 305E 20
  305F 64 6F 73 20                 FCC "dos "
  3063 74 72 65 73                 FCC     "tres "
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       2

. 3067 20
  3068 63 75 61 74                 FCC     "cuatro "
. 306C 72 6F 20
  306F 63 69 6E 63                 FCC     "cinco "
. 3073 6F 20
  3075 73 65 69 73                 FCC     "seis "
. 3079 20
  307A 73 69 65 74                 FCC     "siete "
. 307E 65 20
  3080 6F 63 68 6F                 FCC     "ocho "
. 3084 20
  3085 6E 75 65 76                 FCC     "nueve "
. 3089 65 20
  308B 64 69 65 63                 FCC "dieci "
. 308F 69 20
  3091 64 69 65 7A                 FCC     "diez "
. 3095 20
  3096 6F 6E 63 65                 FCC "once "
. 309A 20
  309B 64 6F 63 65                 FCC "doce "
. 309F 20
  30A0 74 72 65 63                 FCC "trece "
. 30A4 65 20
  30A6 63 61 74 6F                 FCC "catorce "
. 30AA 72 63 65 20
  30AE 71 75 69 6E                 FCC "quince "
. 30B2 63 65 20
  30B5 64 69 65 63                 FCC "diecisEis "
. 30B9 69 73 45 69
. 30BD 73 20
  30BF 76 65 69 6E                 FCC "veinte "
. 30C3 74 65 20
  30C6 76 65 69 6E                 FCC "veinti "
. 30CA 74 69 20
  30CD 76 65 6E 74                 FCC "ventisEis "
. 30D1 69 73 45 69
. 30D5 73 20
  30D7 79 20                       FCC "y "
  30D9 74 72 65 69                 FCC "treinta "
. 30DD 6E 74 61 20
  30E1 63 75 61 72                 FCC "cuarenta "
. 30E5 65 6E 74 61
. 30E9 20
  30EA 63 69 6E 63                 FCC "cincuenta "
. 30EE 75 65 6E 74
. 30F2 61 20
  30F4 73 65 73 65                 FCC "sesenta "
. 30F8 6E 74 61 20
  30FC 73 65 74 65                 FCC "setenta "
. 3100 6E 74 61 20
  3104 6F 63 68 65                 FCC "ochenta "
. 3108 6E 74 61 20
  310C 6E 6F 76 65                 FCC "noventa "
. 3110 6E 74 61 20
  3114 63 69 65 6E                 FCC "cien "
. 3118 20
  3119 63 69 65 6E                 FCC "ciento "
. 311D 74 6F 20
  3120 63 69 65 6E                 FCC "cientos "
. 3124 74 6F 73 20
  3128 71 75 69 6E                 FCC "quinientos "
. 312C 69 65 6E 74
. 3130 6F 73 20
  3133 73 65 74 65                 FCC "setecientos "
. 3137 63 69 65 6E
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       3

. 313B 74 6F 73 20
  313F 6E 6F 76 65                 FCC "novecientos "
. 3143 63 69 65 6E
. 3147 74 6F 73 20
  314B 6D 69 6C 20                 FCC "mil "

                                   ORG $8000
                   INICIO
  8000 8E 00 FF                    LDS #$00FF *Configuracion del puerto serial
  8003 BD 82 2E                    JSR SERIAL * SUBRUTINA PARA CONFIG EL PUERTO
.                  SERIAL
  8006 7E 82 4A                    JMP LIMPIEZA

                   CICLATE
  8009 86 3F                       LDAA    #'?
  800B 97 00                       STAA    ORDEN
                   CICLO
  800D 96 00                       LDAA    ORDEN
  800F 81 3F                       CMPA    #'?
  8011 27 FA                       BEQ     CICLO

  8013 81 4D               CMPA #'M
  8015 27 25               BEQ CASOM
  8017 81 44               CMPA #'D
  8019 27 6D               BEQ CASOD
  801B 7E 80 C5            JMP SALTOINTERMEDIO1

                   ERROR_CICLO
  801E 18 E6 00                    LDAB $00,Y
  8021 E7 00                       STAB $00,X
  8023 08                          INX
  8024 18 08                       INY
  8026 C1 2E                       CMPB #46        * ASCII DE PUNTO
  8028 26 F4                       BNE ERROR_CICLO
  802A 7E 82 19                    JMP FIN
                   ERROR1
  802D D6 02                       LDAB BERROR
  802F 5C                          INCB
  8030 D7 02                       STAB BERROR
  8032 CE 00 50                    LDX #$0050     * DIRECCION DEL MENSAJE
  8035 18 CE 30 00                 LDY #$3000     * ORG DE LOS FCC
  8039 7E 80 1E                    JMP ERROR_CICLO

                   CASOM
  803C D6 18                       LDAB C                  *Verifica que le haya
.                  llegado una C ANTES para el caso de CM
  803E C1 00               CMPB #0
  8040 26 34               BNE CASOM1
  8042 D6 16                       LDAB M
  8044 C1 08                       CMPB #8         *Verifica que no sean ms de 9
.                  emes
  8046 22 E5                       BHI ERROR1
  8048 D6 17                       LDAB D
  804A C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  D's ANTES DE LA M
  804C 26 DF                       BNE ERROR1
  804E D6 19                       LDAB L
  8050 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  L's ANTES DE LA M
  8052 26 D9                       BNE ERROR1
  8054 D6 20                       LDAB XB
  8056 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  X's ANTES DE LA M
  8058 26 D3                       BNE ERROR1
  805A D6 21                       LDAB V
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       4

  805C C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  V's ANTES DE LA M
  805E 26 CD                       BNE ERROR1
  8060 D6 22                       LDAB I
  8062 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  I's ANTES DE LA M
  8064 26 C7                       BNE ERROR1

  8066 A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  8068 08                          INX
  8069 D6 16               LDAB M
  806B 5C                  INCB
  806C D7 16               STAB M
  806E D6 50               LDAB MIL
  8070 5C                  INCB
  8071 D7 50               STAB MIL
  8073 7E 80 09            JMP CICLATE

                   *CASO DONDE LLEGUE CM
                   CASOM1
  8076 C1 01                       CMPB #1         *Compara si hay una segunda C
  8078 22 B3                       BHI ERROR1
  807A CB 05                       ADDB #5
  807C D7 18                       STAB C          *Carga en C el valor de 5
  807E C6 09                       LDAB #9
  8080 D7 51               STAB CENTENA    *Carga en las centenas el valor de 9
  8082 A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  8084 08                          INX             *Aumenta la X en 1
  8085 7E 80 09            JMP CICLATE     *Regresa a esperar

                   CASOD
  8088 D6 20                       LDAB XB
  808A C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  X's ANTES DE LA C
  808C 26 9F                       BNE ERROR1
  808E D6 21                       LDAB V
  8090 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  V's ANTES DE LA C
  8092 26 99                       BNE ERROR1
  8094 D6 22                       LDAB I
  8096 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  I's ANTES DE LA C
  8098 26 93                       BNE ERROR1
  809A D6 17                       LDAB D
  809C 5C                  INCB
  809D D7 17               STAB D
  809F C1 02                       CMPB #2
  80A1 27 8A                       BEQ ERROR1
.                  *VALIDA QUE NO LLEGUEN 2 O MS D's
  80A3 A7 00                       STAA $00,X
.                  *Escribir a partir de la memoria $70 lo que le mande el
.                  usuario
  80A5 08                          INX
  80A6 D6 18               LDAB C
  80A8 C1 00               CMPB #0
  80AA 26 07               BNE CASOD1
  80AC C6 05               LDAB #5
  80AE D7 51               STAB CENTENA
  80B0 7E 80 09            JMP CICLATE
                   CASOD1
                   ***** CASO CD
  80B3 C1 01                       CMPB #1
  80B5 22 5D                       BHI SALTOINTERMEDIO_ERROR     *Compara si hay
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       5

.                  ms de una C
  80B7 CB 05                       ADDB #5
  80B9 D7 18                       STAB C          *Carga en C el valor de 5,
.                  porque? ####
  80BB C6 04                       LDAB #4
  80BD D7 51               STAB CENTENA    *Carga en las centenas el valor de 4
  80BF A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  80C1 08                          INX             *Aumenta la X en 1
  80C2 7E 80 09            JMP CICLATE     *Regresa a esperar


                   SALTOINTERMEDIO1
  80C5 81 43                       CMPA #'C
  80C7 27 07               BEQ CASOC
  80C9 81 4C                       CMPA #'L
  80CB 27 4A               BEQ CASOL
  80CD 7E 81 4E                    JMP SALTOINTERMEDIO

                   *C ES UNA BANDERA A FUTURO PARA ERRORES
                   CASOC
  80D0 D6 20                       LDAB XB
.                  *VERIFICA QUE LLEGUE UN XC
  80D2 C1 00                       CMPB #0
  80D4 26 2C                       BNE CASOC1
  80D6 D6 18                       LDAB C
  80D8 C1 04                       CMPB #4
  80DA 22 38                       BHI SALTOINTERMEDIO_ERROR
  80DC D6 19                       LDAB L
  80DE C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  L's ANTES DE LA C
  80E0 26 32                       BNE SALTOINTERMEDIO_ERROR
  80E2 D6 21                       LDAB V
  80E4 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  V's ANTES DE LA C
  80E6 26 2C                       BNE SALTOINTERMEDIO_ERROR
  80E8 D6 22                       LDAB I
  80EA C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  I's ANTES DE LA C
  80EC 26 26                       BNE SALTOINTERMEDIO_ERROR

  80EE D6 18                       LDAB C
  80F0 5C                  INCB
  80F1 D7 18               STAB C
  80F3 C1 04                       CMPB #4
  80F5 27 1D                       BEQ SALTOINTERMEDIO_ERROR               *
.                  VALIDA QUE NO LLEGUEN 4 O MS C's
  80F7 A7 00                       STAA $00,X
.                  *Escribir a partir de la memoria $70 lo que le mande el
.                  usuario
  80F9 08                          INX
  80FA D6 51                       LDAB CENTENA
  80FC 5C                  INCB
  80FD D7 51               STAB CENTENA
  80FF 7E 80 09            JMP CICLATE

                   *CASO POR SI LLEGA UN XC
                   CASOC1
  8102 C1 01                       CMPB #1
  8104 22 0E                       BHI SALTOINTERMEDIO_ERROR  * SI ES HAY MS DE
.                  UNA C ES ERROR
  8106 CB 05                       ADDB #5          *PARA FUTURO ERROR XCX
  8108 D7 20                       STAB XB
  810A C6 09                       LDAB #9
  810C D7 52                       STAB DECENA
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       6

  810E A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  8110 08                          INX
  8111 7E 80 09                    JMP CICLATE

                   SALTOINTERMEDIO_ERROR
  8114 7E 80 2D                    JMP ERROR1

                   CASOL
  8117 D6 21                       LDAB V
  8119 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  V's ANTES DE LA C
  811B 26 F7                       BNE SALTOINTERMEDIO_ERROR
  811D D6 22                       LDAB I
  811F C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  I's ANTES DE LA C
  8121 26 F1                       BNE SALTOINTERMEDIO_ERROR
  8123 D6 19                       LDAB L
  8125 5C                  INCB
  8126 D7 19               STAB L
  8128 C1 02                       CMPB #2
  812A 27 E8                       BEQ SALTOINTERMEDIO_ERROR               *
.                  VALIDA QUE NO LLEGUEN 2 O MS L's
  812C A7 00                       STAA $00,X
.                  *Escribir a partir de la memoria $70 lo que le mande el
.                  usuario
  812E 08                          INX
  812F D6 20                       LDAB XB
  8131 C1 00                       CMPB #0
  8133 26 07                       BNE CASOL1
  8135 C6 05                       LDAB #5
  8137 D7 52               STAB DECENA

  8139 7E 80 09            JMP CICLATE

                   *PARA CUANDO LLEGA XL
                   CASOL1
  813C C1 01                       CMPB #1
  813E 22 D4                       BHI SALTOINTERMEDIO_ERROR     *Compara si hay
.                  ms de una X
  8140 CB 05                       ADDB #5
  8142 D7 20                       STAB XB          *Suma en X el valor de 5,
.                  porque? ####
  8144 C6 04                       LDAB #4
  8146 D7 52               STAB DECENA     *Carga en las centenas el valor de 4
  8148 A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  814A 08                          INX             *Siguiente Direccion de
.                  escritura
  814B 7E 80 09            JMP CICLATE     *Regresa a esperar

                                             **********SALTO INTERMEDIO
                   SALTOINTERMEDIO
  814E 81 58                       CMPA #'X
  8150 27 0B               BEQ CASOX
  8152 81 56               CMPA #'V
  8154 27 42               BEQ CASOV
  8156 81 49               CMPA #'I
  8158 27 78               BEQ CASOI

  815A 7E 81 C3                    JMP SALTOINTERMEDIO2

                   CASOX
  815D D6 21                       LDAB V
  815F C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       7

.                  V's ANTES DE LA C
  8161 26 B1                       BNE SALTOINTERMEDIO_ERROR
  8163 D6 22                       LDAB I
  8165 C1 00                       CMPB #0
  8167 26 1D                       BNE CASOX1
  8169 D6 20                       LDAB XB
  816B 5C                  INCB
  816C D7 20               STAB XB
  816E C1 03                       CMPB #3
  8170 22 A2                       BHI SALTOINTERMEDIO_ERROR
  8172 D6 21                       LDAB V
  8174 C1 00                       CMPB #0                 *VALIDA QUE NO HAYA
.                  V's ANTES DE LA X
  8176 26 9C                       BNE SALTOINTERMEDIO_ERROR


  8178 A7 00                       STAA $00,X                      *Escribir a
.                  partir de la memoria $70 lo que le mande el usuario
  817A 08                          INX
  817B D6 52                       LDAB DECENA
  817D 5C                          INCB
  817E D7 52                       STAB DECENA
  8180 7E 80 09            JMP CICLATE

                   SALTOINTERMEDIO2_ERROR
  8183 7E 81 14                    JMP SALTOINTERMEDIO_ERROR
                   *CUANDO LLEGUE UN IX
                   CASOX1
  8186 C1 01                       CMPB #1
  8188 22 8A                       BHI SALTOINTERMEDIO_ERROR
  818A CB 06                       ADDB #6
  818C D7 22                       STAB I
  818E C6 09                       LDAB #9
  8190 D7 53                       STAB UNIDAD
  8192 A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  8194 08                          INX
  8195 7E 80 09                    JMP CICLATE

                   CASOV
  8198 D6 21                       LDAB V
  819A 5C                          INCB
  819B D7 21                       STAB V
  819D C1 02                       CMPB #2
  819F 27 E2                       BEQ SALTOINTERMEDIO2_ERROR              *
.                  VALIDA QUE NO LLEGUEN 2 O MS V's
  81A1 A7 00                       STAA $00,X
.                  *Escribir a partir de la memoria $70 lo que le mande el
.                  usuario
  81A3 08                          INX
  81A4 D6 22                       LDAB I
  81A6 C1 00                       CMPB #0
  81A8 26 07                       BNE CASOV1
  81AA C6 05                       LDAB #5
  81AC D7 53                       STAB UNIDAD
  81AE 7E 80 09                    JMP CICLATE

                   *CUANDO LLEGUE UN IV
                   CASOV1
  81B1 C1 01                       CMPB #1
  81B3 22 CE                       BHI SALTOINTERMEDIO2_ERROR
  81B5 CB 06                       ADDB #6
  81B7 D7 22                       STAB I
  81B9 C6 04                       LDAB #4
  81BB D7 53                       STAB UNIDAD
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       8

  81BD A7 00                       STAA $00,X      *Escribir a partir de la
.                  memoria $70 lo que le mande el usuario
  81BF 08                          INX
  81C0 7E 80 09                    JMP CICLATE

                   SALTOINTERMEDIO2
  81C3 81 4F               CMPA #'O  *CASO EN QUE RECIBA OK
  81C5 27 1F               BEQ CASOO
  81C7 81 4B               CMPA #'K
  81C9 27 23               BEQ CASOOK
  81CB 81 3D                       CMPA #61            *Valida que le llegue un
.                  = para saber que es fin de la cadena que mete el usuario
  81CD 27 2B                       BEQ ESCRIBECHAR
  81CF 7E 81 F7                    JMP SALTOINTERMEDIO1_ERROR

                   CASOI

  81D2 D6 22                       LDAB I
  81D4 5C                          INCB
  81D5 D7 22                       STAB I
  81D7 C1 03                       CMPB #3
  81D9 22 A8                       BHI SALTOINTERMEDIO2_ERROR
  81DB A7 00                       STAA $00,X
.                  *Escribir a partir de la memoria $70 lo que le mande el
.                  usuario
  81DD 08                          INX
  81DE D6 53                       LDAB UNIDAD
  81E0 5C                          INCB
  81E1 D7 53                       STAB UNIDAD
  81E3 7E 80 09                    JMP CICLATE

                   CASOO
  81E6 D6 23                       LDAB O
  81E8 5C                          INCB
  81E9 D7 23                       STAB O
  81EB 7E 82 19                    JMP FIN

                   CASOOK
  81EE D6 23                       LDAB O
  81F0 C1 00                       CMPB #0
  81F2 26 56                       BNE LIMPIEZA
  81F4 7E 80 09                    JMP CICLATE

                   SALTOINTERMEDIO1_ERROR
  81F7 7E 80 2D                    JMP ERROR1

                   ESCRIBECHAR
  81FA D6 02                       LDAB BERROR
  81FC C1 01                       CMPB #1
  81FE 27 F7                       BEQ SALTOINTERMEDIO1_ERROR
  8200 C6 30                       LDAB #48  * Es el ascii de 0 en decimal
  8202 96 50                       LDAA MIL
  8204 1B                          ABA
  8205 97 50                       STAA MIL
  8207 96 51                       LDAA CENTENA
  8209 1B                          ABA
  820A 97 51                       STAA CENTENA
  820C 96 52                       LDAA DECENA
  820E 1B                          ABA
  820F 97 52                       STAA DECENA
  8211 96 53                       LDAA UNIDAD
  8213 1B                          ABA
  8214 97 53                       STAA UNIDAD
  8216 7E 82 19                    JMP FIN

  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE       9



                   FIN
  8219 86 3F                       LDAA    #'?
  821B 97 00                       STAA    ORDEN
                   CICLO1
  821D 96 00                       LDAA    ORDEN
  821F 81 3F                       CMPA    #'?

  8221 27 FA                       BEQ     CICLO1
  8223 81 4F                       CMPA #'O
  8225 27 BF                       BEQ CASOO
  8227 81 4B                       CMPA #'K
  8229 27 C3                       BEQ CASOOK
  822B 7E 82 19                    JMP FIN

                   *Configuracion del puerto serial
                   SERIAL
  822E CC 30 2C           LDD   #$302C  * CONFIGURA PUERTO SERIAL
  8231 B7 10 2B           STAA  BAUD    * BAUD  9600  para cristal de 8MHz
  8234 F7 10 2D           STAB  SCCR2   * HABILITA  RX Y TX PERO INTERRUPCN SOLO
.                  RX
  8237 86 00              LDAA  #$00
  8239 B7 10 2C           STAA  SCCR1   * 8 BITS

  823C 86 FE              LDAA  #$FE    * CONFIG PUERTO D COMO SALIDAS (EXCEPTO
.                  PD0)
  823E B7 10 09           STAA  DDRD    * SEA  ENABLE DEL DISPLAY  PD4  Y RS PD3


  8241 86 04              LDAA  #$04
  8243 B7 10 3C           STAA  HPRIO

  8246 86 00              LDAA  #$00
  8248 06                 TAP
  8249 39                RTS


                   LIMPIEZA
  824A 7F 00 16            CLR M
  824D 7F 00 17            CLR D
  8250 7F 00 18            CLR C
  8253 7F 00 19            CLR L
  8256 7F 00 20            CLR XB
  8259 7F 00 21            CLR V
  825C 7F 00 22            CLR I
  825F 7F 00 01            CLR A
  8262 7F 00 02            CLR BERROR
  8265 7F 00 53            CLR UNIDAD
  8268 7F 00 52            CLR DECENA
  826B 7F 00 51            CLR CENTENA
  826E 7F 00 50            CLR MIL
  8271 CE 00 70            LDX #$0070
  8274 18 CE 00 70         LDY #$0070
                   LIM
  8278 86 00               LDAA #00
  827A 18 A7 00            STAA $00,Y
  827D 18 08               INY
  827F 18 8C 00 8F         CPY #$008F
  8283 26 F3               BNE LIM
  8285 18 CE 00 50         LDY #$0050
                   LIM2
  8289 86 00               LDAA #00
  828B 18 A7 00            STAA $00,Y
  828E 18 08               INY
  ADDR B1 B2 B3 B4 E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE      10

  8290 18 8C 00 6F         CPY #$006F
  8294 26 F3               BNE LIM2
  8296 7E 80 09            JMP CICLATE

                   ***********************************
                   * ATENCION A INTERRUPCION SERIAL
                   ***********************************
                           ORG     $F100
  F100 B6 10 2E            LDAA    SCSR
  F103 B6 10 2F            LDAA    SCDR
  F106 97 00               STAA    ORDEN
  F108 3B                  RTI

                   ***********************************
                   * VECTOR INTERRUPCION SERIAL
                   ***********************************
                           ORG     $FFD6
  FFD6 F1 00               FCB     $F1,$00


                   ***********************************
                   *RESET
                   ***********************************
                           ORG     $FFFE
  FFFE 80 00       RESET   FCB     $80,$00
                   ***********************************

                           END     $8000

  Symbol Table 

  CASOOK             81EE
  SERIAL             822E
  A                  0001
  C                  0018
  D                  0017
  I                  0022
  L                  0019
  M                  0016
  O                  0023
  XB                 0020
  V                  0021
  ESCRIBECHAR        81FA
  CSCTL              105D
  CASOC1             8102
  SCCR1              102C
  SCCR2              102D
  CASOD1             80B3
  BERROR             0002
  BAUD               102B
  CASOV1             81B1
  CICLO              800D
  CICLO1             821D
  DECENA             0052
  SALTOINTERMEDIO1   80C5
  SALTOINTERMEDIO2   81C3
  CASOX1             8186
  OPT2               1038
  CICLATE            8009
  SALTOINTERMEDIO2_ERROR 8183
  UNIDAD             0053
  RESET              FFFE
  ERROR_CICLO        801E
  LIM                8278
  ORDEN              0000
  Symbol Table     E:\Repositorios\68hc11-1\Proyecto2.asc           PAGE      11

  CENTENA            0051
  HPRIO              103C
  SALTOINTERMEDIO1_ERROR 81F7
  SCSR               102E
  FIN                8219
  CASOL1             813C
  LIM2               8289
  DDRD               1009
  ERROR1             802D
  CASOM1             8076
  SCDR               102F
  SALTOINTERMEDIO_ERROR 8114
  CASOC              80D0
  CASOD              8088
  CASOI              81D2
  CASOL              8117
  CASOM              803C
  CASOO              81E6
  CASOV              8198
  CASOX              815D
  SPCR               1028
  MIL                0050
  INICIO             8000
  LIMPIEZA           824A
  SALTOINTERMEDIO    814E
